(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],e):e((d=typeof globalThis<"u"?globalThis:d||self).PureTable={},d.Vue,d.ElementPlus)})(this,function(d,e,C){"use strict";function J(t){if(t&&t.__esModule)return t;const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const o in t)if(o!=="default"){const l=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>t[o]})}}return n.default=t,Object.freeze(n)}const F=J(e);process.env.NODE_ENV==="production"||Object.freeze({}),process.env.NODE_ENV==="production"||Object.freeze([]);const L=Object.prototype.hasOwnProperty,E=(t,n)=>L.call(t,n),R=t=>t!==null&&typeof t=="object",V="__epPropKey",U=((t,n)=>{if(!R(t)||R(o=t)&&o[V])return t;var o;const{values:l,required:p,default:v,type:O,validator:y}=t,S=l||y?b=>{let u=!1,f=[];if(l&&(f=Array.from(l),E(t,"default")&&f.push(v),u||(u=f.includes(b))),y&&(u||(u=y(b))),!u&&f.length>0){const T=[...new Set(f)].map(B=>JSON.stringify(B)).join(", ");e.warn(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${T}], got value ${JSON.stringify(b)}.`)}return u}:void 0,j={type:O,required:!!p,validator:S,[V]:!0};return E(t,"default")&&(j.default=v),j})({type:String,values:["","default","small","large"],required:!1});var G={data:{type:Array,default:()=>[]},size:U,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean};const Q={key:{type:String||Number,default:"0"},columns:{type:Array,default:[]},loading:{type:Boolean,default:!1},loadingConfig:{type:Object,default:()=>{}},alignWhole:{type:String,default:"left"},headerAlign:{type:String,default:""},showOverflowTooltip:{type:Boolean,default:!1},rowHoverBgColor:{type:String,default:""},pagination:{type:Object,default:{total:0,pageSize:5,align:"right",background:!1,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"}},paginationSmall:{type:Boolean,default:!1},...G},X={render:{type:Function},params:{type:Object}},k=e.defineComponent({name:"Renderer",props:X,setup:t=>()=>e.createVNode(e.Fragment,null,[t.render(t.params)])});var $=Object.defineProperty,Y=Object.getOwnPropertyDescriptor,Z=Object.getOwnPropertyNames,ee=Object.prototype.hasOwnProperty,A=(t,n,o,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let p of Z(n))!ee.call(t,p)&&p!==o&&$(t,p,{get:()=>n[p],enumerable:!(l=Y(n,p))||l.enumerable});return t},te=Object.prototype.toString;function D(t){return typeof t=="function"}function ne(t){return function(n,o){return te.call(n)===`[object ${o}]`}(t,"Boolean")}var M,_,m={};((t,n)=>{for(var o in n)$(t,o,{get:n[o],enumerable:!0})})(m,{Vue:()=>F}),A(m,M=F,"default"),_&&A(_,M,"default");var re=()=>{let t,n=(0,m.ref)(!1),o=()=>{n.value=document.documentElement.classList.contains("dark")};return function(l){(0,m.getCurrentInstance)()&&(0,m.onUnmounted)(l)}(()=>{t.takeRecords(),t.disconnect()}),(0,m.onBeforeMount)(()=>{o(),t=new MutationObserver(o),t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),{isDark:n}};const P=e.defineComponent({name:"PureTable",props:Q,emits:["page-size-change","page-current-change"],setup(t,{slots:n,attrs:o,emit:l,expose:p}){const{isDark:v}=re(),O=e.getCurrentInstance();function y(){var r;return(r=O==null?void 0:O.proxy)==null?void 0:r.$refs[`TableRef${t.key}`]}function S(){return y().$refs}e.onMounted(()=>{e.nextTick(()=>{t.rowHoverBgColor&&S().tableWrapper.style.setProperty("--el-table-row-hover-bg-color",t.rowHoverBgColor,"important")})});const{columns:j,loading:b,loadingConfig:u,alignWhole:f,headerAlign:T,showOverflowTooltip:B,pagination:a}=e.toRefs(t);let oe=e.computed(()=>{if(!e.unref(u))return;let{text:r,spinner:i,svg:c,viewBox:s}=e.unref(u);return{"element-loading-text":r,"element-loading-spinner":i,"element-loading-svg":c,"element-loading-svg-view-box":s}});const le=e.computed(()=>{var r,i;if(e.unref(b))return{"element-loading-background":((i=(r=e.unref(u))==null?void 0:r.background)!=null?i:v.value)?"rgba(0, 0, 0, 0.45)":"rgba(255, 255, 255, 0.45)"}}),ae=e.computed(()=>{var r;return Object.assign({width:"100%",margin:"16px 0",display:"flex",justifyContent:e.unref(a).align==="left"?"flex-start":e.unref(a).align==="center"?"center":"flex-end"},(r=e.unref(a).style)!=null?r:{})});let ie=e.unref(a)&&e.unref(a).currentPage&&e.unref(a).pageSize;const H=(r,i)=>{const{cellRenderer:c,slot:s,headerRenderer:I,hide:h,children:w,prop:x,...se}=r;if(D(h)&&h(o))return h(o);if(ne(h)&&h)return h;const K={default:g=>{var W;return c?e.createVNode(k,{render:c,params:Object.assign(g,{index:g.$index,props:t,attrs:o})},null):s?(W=n==null?void 0:n[s])==null?void 0:W.call(n,Object.assign(g,{index:g.$index,props:t,attrs:o})):void 0}};let N=I?{header:g=>e.createVNode(k,{render:I,params:Object.assign(g,{index:g.$index,props:t,attrs:o})},null),...K}:K;return(w==null?void 0:w.length)>0&&(N=w.map(H)),e.createVNode(C.ElTableColumn,e.mergeProps({key:i},se,{prop:D(x)&&x(i)?x(i):x,align:r!=null&&r.align?r.align:e.unref(f),headerAlign:r!=null&&r.headerAlign?r.headerAlign:e.unref(T),showOverflowTooltip:r!=null&&r.showOverflowTooltip?r.showOverflowTooltip:e.unref(B)}),typeof(z=N)=="function"||Object.prototype.toString.call(z)==="[object Object]"&&!e.isVNode(z)?N:{default:()=>[N]});var z};p({getTableRef:y,getTableDoms:S});let ue=()=>{var r,i;return e.createVNode(e.Fragment,null,[e.createVNode(C.ElTable,e.mergeProps(t,o,{ref:`TableRef${t.key}`}),{default:()=>e.unref(j).map(H),append:()=>n.append&&n.append(),empty:()=>n.empty&&n.empty()}),ie?e.createVNode(C.ElPagination,e.mergeProps(o,{class:"pure-pagination",style:e.unref(ae)},e.unref(a),{small:t!=null&&t.paginationSmall?t==null?void 0:t.paginationSmall:!!e.unref(a).small&&e.unref(a).small,layout:(r=e.unref(a).layout)!=null?r:"total, sizes, prev, pager, next, jumper",pageSizes:(i=e.unref(a).pageSizes)!=null?i:[5,10,15,20],onSizeChange:c=>(s=>{e.unref(a).pageSize=s,l("page-size-change",s)})(c),onCurrentChange:c=>(s=>{e.unref(a).currentPage=s,l("page-current-change",s)})(c)}),null):null])};return()=>e.withDirectives(e.createVNode("div",e.mergeProps({class:"pure-table",style:"width:100%"},e.unref(le),e.unref(oe)),[ue()]),[[e.resolveDirective("loading"),e.unref(b)]])}}),q=Object.assign(P,{install:function(t){t.component(P.name,P)}});d.PureTable=q,d.default=q,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
